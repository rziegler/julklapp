package ch.bbv.julklapp.persistence;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.Query;

import ch.bbv.julklapp.core.dao.Circle;

public class PersistenceHelper {
	
	private final EntityManager entityManager;

	public PersistenceHelper(EntityManager entityManager){
		this.entityManager = entityManager;	
	}
	
	public Circle getCircleByName(String circleName){
		Query query = entityManager
				.createQuery("SELECT c FROM Circle c WHERE c.name = '"
						+ circleName + "'");
		@SuppressWarnings("unchecked")
		List<Circle> circles = query.getResultList();

		if (circles.isEmpty()) {
			return null;
		} else if (circles.size() > 1) {
			throw new IllegalStateException("reuslt must contain");
		} else {
			return circles.get(0);
		}
	}

}
